package Task_2;


public class GSM {
	String model = "";
	boolean hasSimCard = false;
	private String simMobileNumber = "";
	double outgoingCallsduration = 0;
	double incomingCallsduration = 0;
	Call lastIncomingCall = new Call();
	Call lastOutgoingCall = new Call();

	void insertSimCard(String simMobileNumber) {
		boolean allNumbers=true;
		for (int i = 0; i < simMobileNumber.length(); i++) {
			if (simMobileNumber.charAt(i)>'9'||simMobileNumber.charAt(i)<'0') {
				allNumbers=false;
			}
		}
		if (allNumbers==true&&simMobileNumber.startsWith("08") && simMobileNumber.length() == 10) {
			this.simMobileNumber = simMobileNumber;
			this.hasSimCard = true;
		}
		else{
			System.out.println("Not valid number");
		}
	}
	
	void removeSimCadr(){
		this.hasSimCard=false;
		this.simMobileNumber="";
	}
	
	void call(GSM reciever,int duration){
		if (duration<0){
			System.out.println("Please enter a valid duration of the call");
			return;
		}
		if (this.simMobileNumber.equals(reciever.simMobileNumber)){
			System.out.println("The caller and receiver have the same number, call not allowed");
			return;
		}
		if(this.hasSimCard==false&&reciever.hasSimCard==false){
			System.out.println("The caller and the receiver have no SIM cards");
			return;
		}
		if(this.hasSimCard==false){
			System.out.println("The caller has no SIM card");
			return;
		}
		if(reciever.hasSimCard==false){
			System.out.println("The receiver has no SIM card");
			return;
		}
		
		Call calling= new Call();
		calling.duration=duration;
		calling.caller=this;
		calling.receiver=reciever;
		
		this.lastOutgoingCall=calling;
		this.outgoingCallsduration += duration;
		
		reciever.lastIncomingCall=calling;
		reciever.incomingCallsduration += duration;
	}
	
	double getSumForCall(){
		if(this.outgoingCallsduration!=0){
			return this.outgoingCallsduration*this.lastOutgoingCall.priceForMinute;
		}
		else{
			System.out.println("There are no outgoing calls made");
			return 0;
		}
		
	}
}

