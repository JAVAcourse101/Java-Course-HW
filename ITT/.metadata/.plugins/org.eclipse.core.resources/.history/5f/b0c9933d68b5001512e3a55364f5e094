package Taks_1;

public class AllWork {
	private Task[] tasks;
	private int freePlacesForTasks;
	private int currentUnassignedTask;
	private int indexForAdding;

	AllWork() {
		this.tasks = new Task[10];
		this.setFreePlacesForTasks(10);
		this.indexForAdding = 0;
	}

	public void addTask(Task task) {
		if (task == null) {
			return;
		}
		this.tasks[indexForAdding] = task;
		setFreePlacesForTasks(getFreePlacesForTasks() + 1);
		indexForAdding = (indexForAdding + 1) % this.getTasks().length;
		this.setCurrentUnassignedTask();

	}

	public Task getNextTask() {
		if (this.currentUnassignedTask == -1) {
			return null;
		}
		Task temp=this.tasks[currentUnassignedTask];
		this.setFreePlacesForTasks(this.getFreePlacesForTasks() - 1);
		this.currentUnassignedTask=(currentUnassignedTask+1)%this.getTasks().length;
		
		return temp;
	}

	public boolean isAllWorkDone() {
		for (int i = 0; i < tasks.length; i++) {
			if (this.tasks[i] != null && this.tasks[i].getWorkingHours() > 0) {
				return false;
			}
		}
		return true;
	}

	private void setCurrentUnassignedTask() {
		for (int i = 0; i < tasks.length; i++) {
			if (this.tasks[i] != null && this.tasks[i].getOwner() == null) {
				this.currentUnassignedTask = i;
				return;
			}
		}
		this.currentUnassignedTask = -1;
	}

	private Task[] getTasks() {
		return tasks;
	}
	
	public void genarateTasks(){
		for (int i = 1; i <= tasks.length; i++) {
			String name="Task "+String.valueOf(i);
			this.getTasks()[i-1]=new Task(name, i);
			setFreePlacesForTasks(getFreePlacesForTasks() - 1);
		}
	}
	public void showAllTasks(){
		for (int i = 0; i < tasks.length; i++) {
			if (this.getTasks()[i]!=null){
				this.getTasks()[i].printInfo();
			}
			
		}
	}

	public int getFreePlacesForTasks() {
		return freePlacesForTasks;
	}

	private void setFreePlacesForTasks(int freePlacesForTasks) {
		this.freePlacesForTasks = freePlacesForTasks;
	}
	
	public int getMaxNumberOfPlacesForTasks() {
		return this.getTasks().length;
	}
}
